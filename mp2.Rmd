---
title: "Mini-Project 2"
author: "Liu Sifan & Ziheng Ru & Runxin Wang"
date: "October 31, 2017"
output: html_document
---


```{r}
library(dplyr)
library(tidyverse)
library(plyr)
```


```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r}
committees_contribution <- committees %>%
  left_join(contributions, by = "cmte_id")
```


```{r}
Fl_winner <- house_elections %>%
  filter(state == "FL") %>%
  filter(ge_winner == "W") %>%
  filter(party == "R"| party == "D")
List_winner1 <- Fl_winner %>%
  mutate(upper_name=toupper(candidate_name)) %>%
  select("upper_name") 
List_winner1

list_FL_winner <-  c (List_winner1)
```



```{r}
FL_win <- Fl_winner %>%
  summarise(N = n(),
            r = sum(party == "R")) %>%
  mutate(r_percentage = r/N)
FL_win
```

```{r}
committees_contribution <- committees %>%
  left_join(contributions, by = "cmte_id")
```

```{r}
committees_contribution <- committees_contribution %>%
  rename( "cand_id"= "cand_id.y")
```

```{r}
house_elections <- house_elections %>%
  rename("cand_name" = "candidate_name" )
```


```{r}
committees_contribution_2 <- committees_contribution %>%
  right_join(candidates, by = "cand_id")
```

```{r}
new_file <- committees_contribution_2 %>%
  select("cand_name", "cand_id", "cand_party_affiliation", "cmte_party_affiliation", "transaction_amt",  "name", "city","state", "memo_cd", "memo_text")
```

```{r}
final_dataset <- house_elections %>%
  left_join(new_file, by = "cand_name")
```


```{r}
 subset(new_file,list_FL_winner %in% cand_name)

```