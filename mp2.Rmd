---
title: "Mini-Project 2"
author: "Liu Sifan & Ziheng Ru & Runxin Wang"
date: "October 31, 2017"
output: html_document
---


```{r}
library(dplyr)
library(tidyverse)
library(plyr)
```

```{r}
data <- mutate(candidates, cand_party_affiliation = case_when(
   cand_party_affiliation == "REP" ~ "R",
   cand_party_affiliation == "DEM" ~ "D",
   TRUE ~ cand_party_affiliation)
)
```


```{r, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r}
general_votes <- house_elections %>%
  filter(general_votes != 0) 
```

```{r}
committees_contribution <- committees %>%
  left_join(contributions, by = "cmte_id")
```


```{r}
FL_win <- house_elections %>%
  filter(state == "FL") %>%
  filter(ge_winner == "W") %>%
  filter(party == "R"| party == "D") %>%
  summarise(N = n(),
            r = sum(party == "R")) %>%
  mutate(r_percentage = r/N)

```

```{r}
committees_contribution <- committees %>%
  left_join(contributions, by = "cmte_id")
```

```{r}
committees_contribution <- rename(committees_contribution, replace=c("cand_id.y"="cand_id"))
```

```{r}
committees_contribution_2 <- committees_contribution %>%
  right_join(candidates, by = "cand_id")
```

```{r}
new_file <- committees_contribution_2 %>%
  select("cand_name", "cand_id", "cand_party_affiliation", "cmte_party_affiliation", "transaction_amt",  "name", "city","state", "memo_cd", "memo_text")
```


